
<style>

  #overlay {
    padding: 0px;
    --overlay-toolbar-background-color: var(--app-primary-color);
    --overlay-toolbar-vignette-opacity: 0;
  }

  paper-button {
    display:        inline-flex;
    flex-direction: column;
    font-size:      10px;
  }

  paper-button[pressed] {
    outline: none;
  }

  paper-tabs {
    height: 64px;
    --paper-tab-ink:                  var(--constant-light-text);
    --paper-tabs-selection-bar-color: var(--constant-light-text);
  }

  .page {
    min-width:    100%;
    margin-right: 16px;
  }

  *[hidden] {
    display: none;
  }

</style>


<app-header-overlay id="overlay"
                    disable-auto-sticky
                    disable-background-effects
                    disable-condense
                    header-size="2"
                    parent-controls-exits
                    prebuilt-animation="from-right"
                    reset-scroll
                    title="[[item.displayName]]"
                    on-header-overlay-back="__back"
                    on-overlay-reset="__reset">


  <paper-button hidden="[[_hideToolbarBtns]]"
                slot="top-toolbar-buttons-slot"
                on-click="__resetBtnClicked">
    <iron-icon icon="image-editor-icons:refresh"></iron-icon>
    <div>Reset</div>
  </paper-button>

  <paper-button hidden="[[_hideToolbarBtns]]"
                slot="top-toolbar-buttons-slot"
                on-click="__saveBtnClicked">
    <iron-icon icon="image-editor-icons:cloud-upload"></iron-icon>
    <div>Save</div>
  </paper-button>
                    

  <paper-tabs attr-for-selected="page"
              slot="bottom-toolbar-tabs-slot"
              selected="filters"
              on-selected-changed="__selectedPageChanged">

    <paper-tab page="filters">Filters</paper-tab>
    <paper-tab page="adjust">Adjust</paper-tab> 
    <paper-tab page="crop">Crop</paper-tab>
    <paper-tab page="meta" 
               hidden="[[_hideMeta]]">
      Meta
    </paper-tab> 

  </paper-tabs>


  <tab-pages id="pages"
             attr-for-selected="page"
             selected="[[_selectedPage]]"
             slot="content"
             on-tab-pages-page-changed="__tabPageChanged">    
    
    <image-filters class="page"
                   current="[[_currentPage]]"
                   edited="[[_edited]]"
                   high-quality="[[_highQuality]]"
                   item="[[item]]" 
                   page="filters"
                   selected="[[_selectedPage]]"
                   on-image-filters-filter-applied="__filtered"
                   on-image-filters-hide-spinner="__hideSpinner"
                   on-image-filters-show-spinner="__showSpinner">
    </image-filters>

    <image-adjuster class="page" 
                    current="[[_currentPage]]"
                    edited="[[_edited]]"
                    high-quality="[[_highQuality]]"
                    item="[[_lazyItem]]" 
                    page="adjust"
                    selected="[[_selectedPage]]"
                    on-image-adjuster-adjustments-applied="__adjusted"
                    on-image-adjuster-hide-spinner="__hideSpinner"
                    on-image-adjuster-show-spinner="__showSpinner">                      
    </image-adjuster>

    <image-cropper class="page"
                   current="[[_currentPage]]"
                   edited="[[_edited]]"
                   high-quality="[[_highQuality]]"
                   item="[[_lazyItem]]" 
                   page="crop"                   
                   selected="[[_selectedPage]]"
                   on-image-cropper-cropped="__cropped"
                   on-image-cropper-hide-spinner="__hideSpinner"
                   on-image-cropper-show-spinner="__showSpinner">
    </image-cropper>

    <image-meta class="page"
                current="[[_currentPage]]"
                page="meta"
                selected="[[_selectedPage]]">
      <metadata-page dark-mode="[[darkMode]]"
                     geolocation="[[_geolocation]]"
                     hidden="[[_hideMeta]]"
                     is-img="[[_isImg]]"
                     item="[[_lazyItem]]"
                     list="[[list]]"
                     on-display-name-changed="__displayNameChanged"
                     on-open-map-overlay="__openMapOverlay">
      </metadata-page>
    </image-meta>

  </tab-pages>


</app-header-overlay>


<map-overlay id="mapOverlay"
             dark-mode="[[darkMode]]"
             draggable 
             lat="[[item.geolocation.lat]]" 
             lng="[[item.geolocation.lng]]"
             zoom="[[_defaultZoom]]"
             on-selected-changed="__mapOverlaySelectedChanged">
</map-overlay>


<app-spinner id="spinner" 
             full-screen>
</app-spinner>


<image-editor-reset-modal id="resetModal"
                          on-image-editor-reset-modal-reset="__resetAll">
</image-editor-reset-modal>


<image-editor-save-modal id="saveModal" 
                         src="[[_edited]]"
                         on-image-editor-save-modal-close="__close"
                         on-image-editor-save-modal-save="__save"
                         on-image-editor-save-modal-save-close="__saveAndClose">
</image-editor-save-modal>
