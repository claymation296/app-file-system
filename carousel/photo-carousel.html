
<style include="app-shared-styles">

  #background,
  #carousel {
    position: fixed;
    top:      0px;
    right:    0px;
    bottom:   0px;
    left:     0px;
    background-color: black;
  }
  
  #background {
    display:    none;
    opacity:    0;
    transition: opacity 0.6s;
    z-index:    1;
  }

  #flip {
    z-index: 1;
  }

  #overlay {

    /*
      Addresses the carousel jumping up suddenly on exit.
    */
    padding:       0px;
    margin-bottom: 128px;

    box-shadow: none;
    --overlay-background-color:                   transparent;
    --overlay-toolbar-background-parallax-height: 100%;
    --overlay-toolbar-background-color:           transparent;
    --overlay-toolbar-vignette-opacity:           0;
  }

  .header-background {
    position:       absolute;
    top:            0px;
    right:          0px;
    bottom:         0px;
    left:           0px;
    pointer-events: none;
    z-index:       -1;
  }

  .blur {
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter:         blur(10px);
  }

  /*
    Cannot have a background color and 
    a backdrop-filter on same element.
  */
  #header-color-background {
    opacity:          0.7;
    background-color: var(--app-primary-color);
  }

  #bottom-toolbar-btns {
    display:         flex;
    justify-content: flex-end;
    align-items:     flex-end;
    position:        absolute;
    top:            -64px;
    bottom:          0px;
    left:            0px;
    right:           0px;
    padding:         12px 16px;
    pointer-events:  none;
  }

  .toolbar-buttons {
    pointer-events: auto;
  }

  paper-icon-button[disabled] {
    color: var(--disabled-text-color);
  }

  #carousel {

    /*
      iOS Safari fix for initial positioning being 
      offset when using margin on carousel-items. 
      MUST use padding and match the padding with
      a wider carousel.
    */
    left:  -4px;
    right: -4px;

    opacity: 0;
  }

</style>


<div id="background"></div>


<flip-image id="flip"
            measurements="[[_measurements]]"
            sizing="contain"
            src="[[_placeholder]]">
</flip-image>


<app-header-overlay id="overlay"
                    close-button
                    disable-background-effects
                    prebuilt-animation="from-top"
                    header-size="2"
                    no-back-button
                    reset-scroll
                    sticky-bottom-toolbar
                    title="[[_title]]"
                    top-title
                    on-overlay-reset="__reset">

  <div class="header-background blur" 
       slot="header-background-slot">
  </div>

  <div id="header-color-background"
       class="header-background" 
       slot="header-background-slot">
  </div>

  <div id="bottom-toolbar-btns"
       class="shared-card-shadow"
       slot="bottom-toolbar-buttons-slot">

    <action-buttons class="toolbar-buttons" 
                    item="[[_currentItem]]">
    </action-buttons>

    <paper-icon-button class="toolbar-buttons"
                       disabled="[[_editBtnDisabled]]"
                       icon="file-icons:tune"
                       on-click="__editBtnClicked">
    </paper-icon-button>

  </div>
    
  <paginated-carousel id="carousel"
                      coll="[[coll]]"
                      disabled="[[_carouselDisabled]]"
                      opened="[[_opened]]"
                      start="[[_start]]"
                      slot="content"
                      on-carousel-ready="__carouselReady"
                      on-centered-item-changed="__centeredItemChanged"
                      on-photo-selected="__photoSelected">
  </paginated-carousel>

</app-header-overlay>
