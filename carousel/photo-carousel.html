
<style include="app-shared-styles">

  lazy-image,
  #content {
    position: fixed;
    top:      0px;
    right:    0px;
    bottom:   0px;
    left:     0px;
    background-color: black;
  }

  lazy-image {
    display:    none;
    opacity:    0;
    transition: opacity 0.2s;
    z-index:    1;
  }

  #flip {
    z-index: 1;
  }

  #overlay {
    box-shadow: none;
    --overlay-background-color:         transparent;
    --overlay-toolbar-background-parallax-height: 100%;
    --overlay-toolbar-background-color: transparent;
    --overlay-toolbar-vignette-opacity: 0;
  }

  .background {
    position:       absolute;
    top:            0px;
    right:          0px;
    bottom:         0px;
    left:           0px;
    pointer-events: none;
    z-index:       -1;
  }

  .blur {
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter:         blur(10px);
  }

  /*
    Cannot have a background color and 
    a backdrop-filter on same element.
  */
  #header-color-background {
    opacity:          0.7;
    background-color: var(--app-primary-color);
  }

  #bottom-toolbar-btns {
    display:         flex;
    justify-content: flex-end;
    align-items:     flex-end;
    position:        absolute;
    top:            -64px;
    bottom:          0px;
    left:            0px;
    right:           0px;
    padding:         16px;
    pointer-events:  none;
  }

  .toolbar-buttons {
    pointer-events: auto;
  }

  #content {
    display:         flex;
    justify-content: center;
    align-items:     center;
  }

</style>


<lazy-image id="lazyImg"
            alt="[[item.displayName]]"
            orientation="[[_orientation]]"
            placeholder="[[_placeholder]]"
            src="[[_src]]"
            sizing="contain"
            on-lazy-image-loaded-changed="__lazyImgLoaded">
</lazy-image>


<flip-image id="flip"
            measurements="[[_measurements]]"
            orientation="[[item.exif.Orientation]]"
            sizing="contain"
            src="[[_placeholder]]">
</flip-image>


<app-header-overlay id="overlay"
                    close-button
                    disable-background-effects
                    prebuilt-animation="from-top"
                    header-size="2"
                    no-back-button
                    reset-scroll
                    title="[[_currentItem.displayName]]"
                    top-title
                    on-overlay-reset="__reset">

  <div class="background blur" 
       slot="header-background-slot">
  </div>

  <div id="header-color-background"
       class="background" 
       slot="header-background-slot">
  </div>

  <div id="bottom-toolbar-btns"
       class="shared-card-shadow"
       slot="bottom-toolbar-buttons-slot">

    <action-buttons class="toolbar-buttons" 
                    item="[[_currentItem]]">
    </action-buttons>

    <paper-icon-button class="toolbar-buttons"
                       icon="file-icons:tune"
                       on-click="__editBtnClicked">
    </paper-icon-button>

  </div>


  <div id="content"
       slot="content">
    
    <paginated-carousel start="[[item]]"
                        opened="[[_opened]]"
                        on-current-item-changed="__currentItemChanged"
                        on-photo-selected="__photoSelected">
    </paginated-carousel>

  </div>

</app-header-overlay>
