
<style include="app-shared-styles">

  #overlay {
    --overlay-background-color: var(--app-body-color);
  }

  #content {
    padding: 32px 16px;
    height:  calc(100vh - 128px);
  }

  #content[hidden] {
    display: none;
  }

  #grid {
    display:            grid;
    grid-template-rows: min-content min-content 24px 1fr;
    grid-row-gap:       16px;
    height:             100%;
  }

  #or {
    text-align: center;
  }

  #modal-items {
    max-height: calc(100vh - 292px);
    overflow-y: auto;
  }

  .cta-btn {
    background-color: var(--app-primary-color);
    color:            var(--constant-light-text);
  }

  .file-name-inputs {
    display:     flex;
    align-items: center;
  }

  .rename-modal-images {
    height:       64px;
    width:        64px;
    margin-right: 8px;
  }

  #skip-btn {
    color: var(--app-primary-color);
  }

</style>


<app-header-overlay id="overlay"
                    header-size="1"
                    prebuilt-animation="from-top"
                    fixed-header
                    title="File Sources"
                    on-overlay-reset="__reset">

  <list-icon-button count="[[_dbCount]]"
                    data="[[data]]"
                    list="[[list]]"
                    slot="top-toolbar-buttons-slot"
                    on-click="__listBtnClicked">
  </list-icon-button>

  <div id="content"
       hidden="[[_hideContent]]" 
       slot="content">

    <div id="grid">

      <div>[[_acceptableTypes]]</div>

      <web-file-card mimes="[[_mimes]]"
                     on-file-added="__webFileAdded">
      </web-file-card>

      <div id="or">OR</div>

      <device-file-card id="deviceFileCard"
                        accept="[[accept]]"
                        hide-dropzone="[[hideDropzone]]"
                        maxfiles="[[maxfiles]]"
                        maxsize="[[maxsize]]"
                        multiple="[[multiple]]"
                        unit="[[unit]]"
                        on-files-added="__deviceFilesAdded">
      </device-file-card>

    </div>

    <app-spinner id="spinner"></app-spinner>

  </div>

</app-header-overlay>


<app-modal id="renameFilesModal"
           heading="[[__computeRenameModalHeading(_filesToRename)]]">
  <div id="content-div" 
       slot="card-content-slot">
    <p>
      Do you want to rename [[__computeRenameModalPural(_filesToRename)]] now?
    </p>
    <p>
      You can also rename your files anytime in the file editor.
    </p>

    <div id="modal-items">
      <template is="dom-repeat" 
                items="[[_filesToRename]]"
                as="file">
        <div class="file-name-inputs">
          <file-thumbnail class="rename-modal-images"
                          item="[[file]]" 
                          presentation 
                          sizing="contain">
          </file-thumbnail>
          <paper-input class="shared-paper-input"
                       allowed-pattern="[^/\f/\n/\r/\t/\v]"
                       autocorrect
                       autofocus
                       autocomplete
                       auto-validate
                       label="File Name"
                       on-value-changed="__renameInputChanged"
                       placeholder="[[__computePlaceholderName(file.name)]]"
                       tabindex="0">
          </paper-input>
        </div>
      </template>
    </div>

  </div>
  
  <div slot="card-actions-slot">
    <paper-button id="skip-btn"
                  on-click="__dismissRenameFilesModalButtonClicked">
      skip
    </paper-button>   
    <paper-button class="cta-btn"               
                  on-click="__saveNamesButtonClicked">
      save name
    </paper-button> 
  </div>
</app-modal>
