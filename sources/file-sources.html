
<style include="app-shared-styles">

  #content {
    padding: 32px 16px;
    height:  calc(100vh - 128px);
    background-color: var(--app-body-color);
  }

  #grid {
    display:            grid;
    grid-template-rows: min-content 24px 1fr;
    grid-row-gap:       16px;
    height:             100%;
  }

  .shared-card {
    padding:          16px;
    background-color: var(--app-background-color);
  }

  .full-width-btn {    
    width: 100%;
  }

  #download-btn {
    margin: 32px 0px 0px 0px;
  }

  #download-btn[disabled] {
    background-color: var(--app-disabled-color);
    color:            var(--disabled-text-color);
  }

  #or {
    text-align: center;
  }

  #drop-zone-card {
    display:        flex;
    flex-direction: column;
  }

  #choose-btn {
    margin: 0px 0px 32px 0px;
  }

  .cta-btn {
    background-color: var(--app-primary-color);
    color:            var(--constant-light-text);
  }

  .file-name-inputs {
    display:     flex;
    align-items: center;
  }

  .rename-modal-images {
    height:       64px;
    width:        64px;
    margin-right: 8px;
  }

  .card-actions {
    display:         flex;
    justify-content: flex-end;
  }

  #skip-btn {
    color: var(--app-primary-color);
  }

  *[hidden] {
    display: none;
  }

</style>


<app-header-overlay id="overlay"
                    header-size="1"
                    prebuilt-animation="from-top"
                    fixed-header
                    title="File Sources">

  <div id="content" 
       slot="content">

    <div id="grid">

      <div class="shared-card">
        <paper-input id="linkInput"
                     class="shared-paper-input"
                     allowed-pattern="[^/\f/\n/\r/\t/\v]"
                     autocapitalize
                     autocomplete
                     autocorrect
                     auto-validate
                     label="Link to File"
                     placeholder="https://www.example.com/my-file.ext"
                     tabindex="0"
                     on-value-changed="__linkInputValueChanged">
        </paper-input>

        <paper-button id="download-btn"
                      class="full-width-btn cta-btn"
                      disabled="[[__computeDownloadBtnDisabled(_linkInputVal)]]"
                      raised
                      on-click="__downloadBtnClicked">
          download file
        </paper-button>
      </div>

      <div id="or">OR</div>

      <div id="drop-zone-card" 
           class="shared-card">
        <paper-button id="choose-btn"
                      class="full-width-btn cta-btn"
                      raised
                      on-click="__chooserBtnClicked">
          choose files
        </paper-button> 

        <drop-zone id="dropZone"
                   accept="[[accept]]"
                   hidden="[[hideDropzone]]"
                   maxfiles="[[maxfiles]]"
                   maxsize="[[maxsize]]"
                   multiple="[[multiple]]"
                   unit="[[unit]]"
                   on-files-added="__dzFilesAdded">
        </drop-zone>
      </div>

    </div>

    <app-spinner id="spinner"></app-spinner>

  </div>

</app-header-overlay>


<app-modal id="renameFilesModal"
           heading="[[__computeRenameModalHeading(multiple)]]">
  <div id="content-div" 
       slot="card-content-slot">
    <p>
      Do you want to rename [[__computeRenameModalPural(multiple)]]?
    </p>
    <p>
      [[__computeRenameModalText(multiple)]]      
    </p>

    <template is="dom-repeat" 
              items="[[_filesToRename]]"
              as="file">
      <div class="file-name-inputs">
        <file-thumbnail class="rename-modal-images"
                        item="[[file]]" 
                        presentation 
                        sizing="contain">
        </file-thumbnail>
        <paper-input class="shared-paper-input"
                     allowed-pattern="[^/\f/\n/\r/\t/\v]"
                     autocorrect
                     autofocus
                     autocomplete
                     auto-validate
                     label="File Name"
                     on-value-changed="__renameInputChanged"
                     placeholder="[[__computePlaceholderName(file.name)]]"
                     tabindex="0">
        </paper-input>
      </div>
    </template>

  </div>
  <div class="card-actions" 
       slot="card-actions-slot">
    <paper-button id="skip-btn"
                  on-click="__dismissRenameFilesModalButtonClicked">
      skip
    </paper-button>   
    <paper-button class="cta-btn"               
                  on-click="__saveNamesButtonClicked">
      save name
    </paper-button> 
  </div>
</app-modal>
